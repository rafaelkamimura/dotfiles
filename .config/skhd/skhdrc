#!/usr/bin/env bash
# ~/.config/skhd/skhdrc - Yabai Keybindings

# ===== FOCUS NAVIGATION =====
# Change focus using hjkl (vim-style)
alt - h : yabai -m window --focus west
alt - j : yabai -m window --focus south
alt - k : yabai -m window --focus north
alt - l : yabai -m window --focus east

# Change focus using arrow keys (alternative)
alt - left : yabai -m window --focus west
alt - down : yabai -m window --focus south
alt - up : yabai -m window --focus north
alt - right : yabai -m window --focus east

# ===== WINDOW MOVEMENT =====
# Swap windows in their positions
shift + alt - h : yabai -m window --swap west
shift + alt - j : yabai -m window --swap south
shift + alt - k : yabai -m window --swap north
shift + alt - l : yabai -m window --swap east

# Move window to position (warp)
ctrl + alt - h : yabai -m window --warp west
ctrl + alt - j : yabai -m window --warp south
ctrl + alt - k : yabai -m window --warp north
ctrl + alt - l : yabai -m window --warp east

# ===== WINDOW RESIZING =====
# Increase window size
shift + alt - a : yabai -m window --resize left:-40:0
shift + alt - s : yabai -m window --resize bottom:0:40
shift + alt - w : yabai -m window --resize top:0:-40
shift + alt - d : yabai -m window --resize right:40:0

# Decrease window size (use ctrl+alt to avoid conflicts with macOS shortcuts)
ctrl + shift - a : yabai -m window --resize left:40:0
ctrl + shift - s : yabai -m window --resize bottom:0:-40
ctrl + shift - w : yabai -m window --resize top:0:40
ctrl + shift - d : yabai -m window --resize right:-40:0

# Balance window sizes (equalize)
shift + alt - 0 : yabai -m space --balance

# ===== LAYOUT SWITCHING =====
# Toggle between bsp and float layout
alt - e : yabai -m space --layout $(yabai -m query --spaces --space | jq -r 'if .type == "bsp" then "float" else "bsp" end')

# Toggle between bsp and stack layout
alt - s : yabai -m space --layout $(yabai -m query --spaces --space | jq -r 'if .type == "bsp" then "stack" else "bsp" end')

# Rotate tree 90 degrees
alt - r : yabai -m space --rotate 90

# Mirror tree horizontally
alt - y : yabai -m space --mirror y-axis

# Mirror tree vertically
alt - x : yabai -m space --mirror x-axis

# ===== WINDOW STATE TOGGLES =====
# Toggle window float/tile
shift + alt - space : yabai -m window --toggle float --grid 4:4:1:1:2:2

# Toggle window fullscreen
alt - f : yabai -m window --toggle zoom-fullscreen

# Toggle window native fullscreen
shift + alt - f : yabai -m window --toggle native-fullscreen

# Toggle window split type (horizontal/vertical)
alt - t : yabai -m window --toggle split

# ===== SPACE MANAGEMENT =====
# NOTE: Space focus switching requires scripting addition (doesn't work on macOS Sequoia)
# Use native macOS: ctrl + arrow keys or Mission Control gestures

# Move window to specific space (works without SA)
shift + alt - 1 : yabai -m window --space 1
shift + alt - 2 : yabai -m window --space 2
shift + alt - 3 : yabai -m window --space 3
shift + alt - 4 : yabai -m window --space 4
shift + alt - 5 : yabai -m window --space 5
shift + alt - 6 : yabai -m window --space 6
shift + alt - 7 : yabai -m window --space 7
shift + alt - 8 : yabai -m window --space 8
shift + alt - 9 : yabai -m window --space 9

# Move window to previous/next space (works without SA)
shift + alt - p : yabai -m window --space prev
shift + alt - n : yabai -m window --space next

# ===== DISPLAY MANAGEMENT (Multi-Monitor) =====
# Focus display 1, 2, or 3
ctrl + alt - 1 : yabai -m display --focus 1
ctrl + alt - 2 : yabai -m display --focus 2
ctrl + alt - 3 : yabai -m display --focus 3

# Move window to display 1, 2, or 3
shift + ctrl + alt - 1 : yabai -m window --display 1; yabai -m display --focus 1
shift + ctrl + alt - 2 : yabai -m window --display 2; yabai -m display --focus 2
shift + ctrl + alt - 3 : yabai -m window --display 3; yabai -m display --focus 3

# Focus next/previous display
ctrl + alt - n : yabai -m display --focus next
ctrl + alt - p : yabai -m display --focus prev

# ===== QUICK ACTIONS =====
# Restart yabai
ctrl + alt + cmd - r : launchctl kickstart -k "gui/${UID}/homebrew.mxcl.yabai"

# Restart skhd
ctrl + alt + cmd - s : brew services restart skhd